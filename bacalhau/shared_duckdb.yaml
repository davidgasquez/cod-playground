APIVersion: V1beta1
Spec:
    Engine: Docker
    Docker:
        Image: davidgasquez/duckdb:latest
        WorkingDirectory: /inputs
        Entrypoint:
            - duckdb
            - -s
            - "select count(*) from '*.parquet'"
    Timeout: 3600
    Sharding:
      BatchSize: 1
      GlobPattern: /*
      BasePath: /inputs
    Resources:
      CPU: 8
      Memory: 32Gb
    Inputs:
        - StorageSource: URLDownload
          URL: https://datasets.clickhouse.com/hits_compatible/athena_partitioned/hits_1.parquet
          Path: /inputs
        - StorageSource: URLDownload
          URL: https://datasets.clickhouse.com/hits_compatible/athena_partitioned/hits_2.parquet
          Path: /inputs
        - StorageSource: URLDownload
          URL: https://datasets.clickhouse.com/hits_compatible/athena_partitioned/hits_3.parquet
          Path: /inputs
        - StorageSource: URLDownload
          URL: https://datasets.clickhouse.com/hits_compatible/athena_partitioned/hits_4.parquet
          Path: /inputs
        - StorageSource: URLDownload
          URL: https://datasets.clickhouse.com/hits_compatible/athena_partitioned/hits_5.parquet
          Path: /inputs
        - StorageSource: URLDownload
          URL: https://datasets.clickhouse.com/hits_compatible/athena_partitioned/hits_6.parquet
          Path: /inputs
    Outputs:
        - Name: outputs
          Path: /outputs
    Deal:
        Concurrency: 1