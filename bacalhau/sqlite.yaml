APIVersion: V1beta1
Spec:
  Engine: Docker
  Docker:
    Image: keinos/sqlite3:3.41.2
    WorkingDirectory: /inputs
    Entrypoint:
      - sqlite3
      - ":memory:"
      - "PRAGMA locking_mode=exclusive;PRAGMA query_only;PRAGMA journal_mode=DELETE;PRAGMA temp_store=MEMORY;"
      - ".open 'file:/inputs/bsky.db?immutable=1"
      - "select * from follows limit 10;"
  Timeout: 3600
  Inputs:
    - Name: bsky.db
      StorageSource: URLDownload
      URL: https://huggingface.co/datasets/andrewconner/bluesky_profiles/resolve/main/bsky.db
      path: /inputs/bsky.db
  Outputs:
    - Name: outputs
      Path: /outputs
Deal:
  Concurrency: 1
